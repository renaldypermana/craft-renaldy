{# @var craft \craft\web\twig\variables\CraftVariable #}
{#
/**
 * Example Plugin plugin for Craft CMS 3.x
 *
 * Example Plugin index.twig
 *
 * @author    Ren
 * @copyright Copyright (c) 2020 Ren
 * @link      github.com/renaldypermana
 * @package   ExamplePlugin
 * @since     1.0.0
 */
#}

{% extends "_layouts/cp" %}

{# The title of this CP section #}
{% set title = "Example Plugin" %}

{# The URL to this plugin's base CP section #}
{% set pluginCpUrl = url('example-plugin') %}

{# Get a URL to an image in our AssetBundle #}
{% set iconUrl = view.getAssetManager().getPublishedUrl('@renaldy/exampleplugin/assetbundles/indexcpsection/dist', true) ~ '/img/Index-icon.svg' %}

{# Content that should appear in the page header#}
{% set extraPageHeaderHtml %}
    <div class="buttons">
        <a href="{{ pluginCpUrl }}" class="btn submit add icon">{{ "Click Me!"|t('example-plugin') }}</a>
    </div>
{% endset %}

{# The content of the CP Section#}
{% set content %}
    <h2>{{ "Index CP Section body goes here"|t('example-plugin') }}</h2>
    <img src="{{ iconUrl }}" height="64" width="64" />
    <table>
      <thead>
        <th>Name</th>
        <th>Email</th>
        <th>Total Purchase</th>
        <th>Birthday</th>
      </thead>
      <tbody class="list">
        {% for item in craft.examplePlugin.getCustomers() %}
          <tr>
            <td class="name">{{ item.name }}</td>
            <td class="email">{{ item.email }}</td>
            <td class="totalPurchase">{{ item.totalPurchase }}</td>
            <td class="birthday">{{ item.birthday|formatDateIndo }}</td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
{% endset %}
